@using Blazor.LoveJS;

<div id="test" />

<Script TComponent="Bundled" @ref=_scriptRef>
    export const run = (message) => {
            document.getElementById("test").innerText = message;
        }
</Script>

<Script TComponent="Bundled">
    export const run2 = (message) => {
            document.getElementById("test").innerText = message;
        }
</Script>

<Script TComponent="Bundled" GlobalBundle=true>
    export const run3 = (message) => {
            document.getElementById("test").innerText = message;
        }
</Script>

<Script TComponent="Bundled" GlobalBundle=true>
    export const run4 = (message) => {
            document.getElementById("test").innerText = message;
        }
</Script>

@code {
    private Script<Bundled> _scriptRef = null!;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        if (firstRender)
        {
            await _scriptRef.InvokeVoidAsync("run", "testMessage");
        }
    }
}